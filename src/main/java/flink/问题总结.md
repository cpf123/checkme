# flink问题

**实时计算**

**① 遇到的问题**

- **稳定性问题**： 由于流量洪峰导致的任务处理数据量变大、内存溢出、数据积压等问题；
- 由于任务频繁提交到故障机器导致任务失败问题；
- 由于部分任务执行耗时导致整个任务执行时间过长，从而产生数据积压的问题；
- 由于网络shuffle耗时导致任务性能变差；
- 由于Spark和Flink自身的监控不能满足业务需要，导致不能及时发现异常问题等。
- **Flink框架问题**： 分布式缓存不生效、Taskmanager超时失败、Flink框架空指针异常等。
- **数据流传输问题**： flume采集数据传输延迟，导致用户行为实时转化不及时。
- **监控问题**： 由于监控时间粒度太小导致监控覆盖不全。

**② 解决方案**

- **稳定性**： 利用Spark和Flink自带的反压机制解决流量洪峰问题；对于机器故障问题采用黑名单机制和推测执行机制来解决；通过定制化任务监控来及时发问题。
- **容错性**： 主要采用Spark和Flink自带的checkpoint机制。
- **高性能**： 算子优化、shuffle优化、参数调优等。
- **Flink问题**： 向Flink社区反馈问题,借助HDFS我们实现了分布式缓存功能。
- **数据传输**： 借助公司力量，推动Flume传输架构优化升级。
- **监控**： 开发自定义监控系统，并结合Flink，Spark自带监控。